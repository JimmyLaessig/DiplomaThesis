\chapter{A functional out-of-core octree}

\section{Rendering}
\subsection{Culling at the Render Horizon}
\label{sec:renderHorizon}
%% TODO
%\section{Overview}
%Modern point clouds are often to large too fit into memory, let alone video memory. In order to manage datasets whose size exceeds several gigabytes, the data must be stored %in an structured way, such that data can be loaded in chunks efficiently. Depending on the camera's view and a level-of-detail ruling, only a subset of points is processed %in the memory and displayed. This method is commonly know as out-of-core processing. One common way to introduce structure to point clouds is by storing the data in an octree. 


%\section{Out-of-core octree}

%An octree is a hierarchical datastructure in which each node represents a spatial region, defined by a 3d bounding box. If the number of elements in a node exceeds a %threshold $n$, the node is partitioned into eight children, each representing one octant. If a node is partitioned, it's elements become a random subset of points of size $n$ from it's children, thus creating an efficient level-of-detail representation of the point cloud. 
%Other implementations, such as Potree\cite{SCHUETZ-2016-POT}, where some points remain in the parent instead of being stored in a child node, are more efficient in terms of disc space. With our approach, each node can be viewed as self-contained, such that no points from predecessor nodes are needed to fully represent the point cloud for this region and level-of-detail.

%Each node contains a set of points whose content is stored on the disc. The data is streamed from a file database into memory on access.


%\section{Octree Operations}
	
%\subsection{Map}
%\subsection{Cull}
%\subsection{Insert}


%In an functional program, changes in datastructures or variables are considered mutations and often introduce side-effects and 
%Changes in data structures Mutations of datastructures often introduce side-effects and race conditions. In a parallel environment, multiple threads execute %computations tasks that change the octree. 
